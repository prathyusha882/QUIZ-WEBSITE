{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\varsa\\\\Quiz-Website-Project\\\\frontend_react\\\\src\\\\components\\\\quiz\\\\Timer.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef } from 'react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Timer = ({\n  durationMinutes,\n  quizStartTime,\n  onTimeUp\n}) => {\n  _s();\n  // If backend provides quizStartTime (ISO string), calculate remaining time accurately\n  const [timeLeft, setTimeLeft] = useState(() => {\n    if (quizStartTime) {\n      const endTime = new Date(quizStartTime).getTime() + durationMinutes * 60 * 1000;\n      return Math.max(0, Math.floor((endTime - Date.now()) / 1000));\n    }\n    return durationMinutes * 60;\n  });\n  const onTimeUpCalled = useRef(false);\n  useEffect(() => {\n    // When duration or start time changes, recalculate\n    if (quizStartTime) {\n      const endTime = new Date(quizStartTime).getTime() + durationMinutes * 60 * 1000;\n      setTimeLeft(Math.max(0, Math.floor((endTime - Date.now()) / 1000)));\n    } else {\n      setTimeLeft(durationMinutes * 60);\n    }\n    onTimeUpCalled.current = false;\n  }, [durationMinutes, quizStartTime]);\n  useEffect(() => {\n    if (timeLeft <= 0) {\n      if (!onTimeUpCalled.current) {\n        onTimeUpCalled.current = true;\n        onTimeUp();\n      }\n      return;\n    }\n    const timerId = setInterval(() => {\n      setTimeLeft(prevTime => {\n        const newTime = prevTime - 1;\n        if (newTime <= 0 && !onTimeUpCalled.current) {\n          onTimeUpCalled.current = true;\n          onTimeUp();\n        }\n        return Math.max(0, newTime);\n      });\n    }, 1000);\n    return () => clearInterval(timerId);\n  }, [timeLeft, onTimeUp]);\n  const formatTime = seconds => {\n    const minutes = Math.floor(seconds / 60);\n    const secs = seconds % 60;\n    return `${minutes.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    role: \"timer\",\n    \"aria-live\": \"polite\",\n    className: \"text-center text-lg font-bold text-gray-800 p-4 rounded-md bg-white shadow-md\",\n    children: [\"Time Left: \", /*#__PURE__*/_jsxDEV(\"span\", {\n      className: \"text-red-500\",\n      children: formatTime(timeLeft)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 18\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 56,\n    columnNumber: 5\n  }, this);\n};\n_s(Timer, \"rNAzzeEFOg5q5hgjbIpQ1SLr6+k=\");\n_c = Timer;\nexport default Timer;\nvar _c;\n$RefreshReg$(_c, \"Timer\");","map":{"version":3,"names":["React","useState","useEffect","useRef","jsxDEV","_jsxDEV","Timer","durationMinutes","quizStartTime","onTimeUp","_s","timeLeft","setTimeLeft","endTime","Date","getTime","Math","max","floor","now","onTimeUpCalled","current","timerId","setInterval","prevTime","newTime","clearInterval","formatTime","seconds","minutes","secs","toString","padStart","role","className","children","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["C:/Users/varsa/Quiz-Website-Project/frontend_react/src/components/quiz/Timer.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\r\n\r\nconst Timer = ({ durationMinutes, quizStartTime, onTimeUp }) => {\r\n  // If backend provides quizStartTime (ISO string), calculate remaining time accurately\r\n  const [timeLeft, setTimeLeft] = useState(() => {\r\n    if (quizStartTime) {\r\n      const endTime = new Date(quizStartTime).getTime() + durationMinutes * 60 * 1000;\r\n      return Math.max(0, Math.floor((endTime - Date.now()) / 1000));\r\n    }\r\n    return durationMinutes * 60;\r\n  });\r\n\r\n  const onTimeUpCalled = useRef(false);\r\n\r\n  useEffect(() => {\r\n    // When duration or start time changes, recalculate\r\n    if (quizStartTime) {\r\n      const endTime = new Date(quizStartTime).getTime() + durationMinutes * 60 * 1000;\r\n      setTimeLeft(Math.max(0, Math.floor((endTime - Date.now()) / 1000)));\r\n    } else {\r\n      setTimeLeft(durationMinutes * 60);\r\n    }\r\n    onTimeUpCalled.current = false;\r\n  }, [durationMinutes, quizStartTime]);\r\n\r\n  useEffect(() => {\r\n    if (timeLeft <= 0) {\r\n      if (!onTimeUpCalled.current) {\r\n        onTimeUpCalled.current = true;\r\n        onTimeUp();\r\n      }\r\n      return;\r\n    }\r\n\r\n    const timerId = setInterval(() => {\r\n      setTimeLeft((prevTime) => {\r\n        const newTime = prevTime - 1;\r\n        if (newTime <= 0 && !onTimeUpCalled.current) {\r\n          onTimeUpCalled.current = true;\r\n          onTimeUp();\r\n        }\r\n        return Math.max(0, newTime);\r\n      });\r\n    }, 1000);\r\n\r\n    return () => clearInterval(timerId);\r\n  }, [timeLeft, onTimeUp]);\r\n\r\n  const formatTime = (seconds) => {\r\n    const minutes = Math.floor(seconds / 60);\r\n    const secs = seconds % 60;\r\n    return `${minutes.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;\r\n  };\r\n\r\n  return (\r\n    <div\r\n      role=\"timer\"\r\n      aria-live=\"polite\"\r\n      className=\"text-center text-lg font-bold text-gray-800 p-4 rounded-md bg-white shadow-md\"\r\n    >\r\n      Time Left: <span className=\"text-red-500\">{formatTime(timeLeft)}</span>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Timer;\r\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,SAAS,EAAEC,MAAM,QAAQ,OAAO;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAE3D,MAAMC,KAAK,GAAGA,CAAC;EAAEC,eAAe;EAAEC,aAAa;EAAEC;AAAS,CAAC,KAAK;EAAAC,EAAA;EAC9D;EACA,MAAM,CAACC,QAAQ,EAAEC,WAAW,CAAC,GAAGX,QAAQ,CAAC,MAAM;IAC7C,IAAIO,aAAa,EAAE;MACjB,MAAMK,OAAO,GAAG,IAAIC,IAAI,CAACN,aAAa,CAAC,CAACO,OAAO,CAAC,CAAC,GAAGR,eAAe,GAAG,EAAE,GAAG,IAAI;MAC/E,OAAOS,IAAI,CAACC,GAAG,CAAC,CAAC,EAAED,IAAI,CAACE,KAAK,CAAC,CAACL,OAAO,GAAGC,IAAI,CAACK,GAAG,CAAC,CAAC,IAAI,IAAI,CAAC,CAAC;IAC/D;IACA,OAAOZ,eAAe,GAAG,EAAE;EAC7B,CAAC,CAAC;EAEF,MAAMa,cAAc,GAAGjB,MAAM,CAAC,KAAK,CAAC;EAEpCD,SAAS,CAAC,MAAM;IACd;IACA,IAAIM,aAAa,EAAE;MACjB,MAAMK,OAAO,GAAG,IAAIC,IAAI,CAACN,aAAa,CAAC,CAACO,OAAO,CAAC,CAAC,GAAGR,eAAe,GAAG,EAAE,GAAG,IAAI;MAC/EK,WAAW,CAACI,IAAI,CAACC,GAAG,CAAC,CAAC,EAAED,IAAI,CAACE,KAAK,CAAC,CAACL,OAAO,GAAGC,IAAI,CAACK,GAAG,CAAC,CAAC,IAAI,IAAI,CAAC,CAAC,CAAC;IACrE,CAAC,MAAM;MACLP,WAAW,CAACL,eAAe,GAAG,EAAE,CAAC;IACnC;IACAa,cAAc,CAACC,OAAO,GAAG,KAAK;EAChC,CAAC,EAAE,CAACd,eAAe,EAAEC,aAAa,CAAC,CAAC;EAEpCN,SAAS,CAAC,MAAM;IACd,IAAIS,QAAQ,IAAI,CAAC,EAAE;MACjB,IAAI,CAACS,cAAc,CAACC,OAAO,EAAE;QAC3BD,cAAc,CAACC,OAAO,GAAG,IAAI;QAC7BZ,QAAQ,CAAC,CAAC;MACZ;MACA;IACF;IAEA,MAAMa,OAAO,GAAGC,WAAW,CAAC,MAAM;MAChCX,WAAW,CAAEY,QAAQ,IAAK;QACxB,MAAMC,OAAO,GAAGD,QAAQ,GAAG,CAAC;QAC5B,IAAIC,OAAO,IAAI,CAAC,IAAI,CAACL,cAAc,CAACC,OAAO,EAAE;UAC3CD,cAAc,CAACC,OAAO,GAAG,IAAI;UAC7BZ,QAAQ,CAAC,CAAC;QACZ;QACA,OAAOO,IAAI,CAACC,GAAG,CAAC,CAAC,EAAEQ,OAAO,CAAC;MAC7B,CAAC,CAAC;IACJ,CAAC,EAAE,IAAI,CAAC;IAER,OAAO,MAAMC,aAAa,CAACJ,OAAO,CAAC;EACrC,CAAC,EAAE,CAACX,QAAQ,EAAEF,QAAQ,CAAC,CAAC;EAExB,MAAMkB,UAAU,GAAIC,OAAO,IAAK;IAC9B,MAAMC,OAAO,GAAGb,IAAI,CAACE,KAAK,CAACU,OAAO,GAAG,EAAE,CAAC;IACxC,MAAME,IAAI,GAAGF,OAAO,GAAG,EAAE;IACzB,OAAO,GAAGC,OAAO,CAACE,QAAQ,CAAC,CAAC,CAACC,QAAQ,CAAC,CAAC,EAAE,GAAG,CAAC,IAAIF,IAAI,CAACC,QAAQ,CAAC,CAAC,CAACC,QAAQ,CAAC,CAAC,EAAE,GAAG,CAAC,EAAE;EACrF,CAAC;EAED,oBACE3B,OAAA;IACE4B,IAAI,EAAC,OAAO;IACZ,aAAU,QAAQ;IAClBC,SAAS,EAAC,+EAA+E;IAAAC,QAAA,GAC1F,aACY,eAAA9B,OAAA;MAAM6B,SAAS,EAAC,cAAc;MAAAC,QAAA,EAAER,UAAU,CAAChB,QAAQ;IAAC;MAAAyB,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAO,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACpE,CAAC;AAEV,CAAC;AAAC7B,EAAA,CA7DIJ,KAAK;AAAAkC,EAAA,GAALlC,KAAK;AA+DX,eAAeA,KAAK;AAAC,IAAAkC,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}